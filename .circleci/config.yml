version: 2.1

orbs:
  unity: game-ci/unity@1.7.1

jobs:
  build-webgl:
    # Executor para WebGL (Linux optimizado con IL2CPP)
    executor:
      name: unity/ubuntu
      resource_class: large  # 8GB+ RAM para builds grandes
      editor_version: 6000.2.10f1
      target_platform: webgl

    steps:
      - checkout
      - unity/build:
          build-target: WebGL
          build-method: BuildWebGL.PerformBuild
          project-path: .
          compress: true 
          store-artifacts: true
          step-name: Build WebGL
          # Licencia online
          unity-username-var-name: UNITY_USERNAME
          unity-password-var-name: UNITY_PASSWORD

workflows:
  version: 2
  build:
    jobs:
      - build-webgl
        # Opcional: Filtros para branches espec√≠ficas
        # filters:
        #   branches:
        #     only:
        #       - main